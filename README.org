* yankee

** GitHub-flavored Markdown

#+BEGIN_SRC markdown
```emacs-lisp
;; yankee.el L158-L163 (ea278931)

(defun yankee/current-commit-ref ()
  "The current commit's SHA, if under version control.
Currently only supports Git."
  (if (equal 'Git (vc-backend (buffer-file-name)))
      (substring (shell-command-to-string "git rev-parse HEAD") 0 8)
    nil))
```
<sup>
  <a href="https://github.com/jkrmr/yankee/blob/ea278931/yankee.el#L158-L163">
    yankee.el#L158-L163 (ea278931)
  </a>
</sup>
#+END_SRC

which produces

#+CAPTION: yank-as-gfm-code-block
#+NAME: fig: gfm
[[https://cloud.githubusercontent.com/assets/4433943/26434857/271536bc-40d9-11e7-93f9-fe0988975259.png]]

** GitHub-flavored Markdown (foldable)

(The summary line is customizable at runtime)

#+BEGIN_SRC markdown
<details>
<summary>yankee/current-commit-ref</summary>

```emacs-lisp
;; yankee.el L158-L163 (ea278931)

(defun yankee/current-commit-ref ()
  "The current commit's SHA, if under version control.
Currently only supports Git."
  (if (equal 'Git (vc-backend (buffer-file-name)))
      (substring (shell-command-to-string "git rev-parse HEAD") 0 8)
    nil))
```
<sup>
  <a href=https://github.com/jkrmr/yankee/blob/ea278931/yankee.el#L158-L163">
    yankee.el#L158-L163 (ea278931)
  </a>
</sup>
</details>
#+END_SRC

which produces

#+CAPTION: yank-as-gfm-code-block-foldable
#+NAME: fig: gfm-foldable
[[https://cloud.githubusercontent.com/assets/4433943/26434858/271fbf6a-40d9-11e7-91fb-66511c42cdc2.gif]]

** Org mode

(Intentionally broken here)

#+BEGIN_SRC org
#+ BEGIN_SRC emacs-lisp
;; yankee.el L158-L163 (517300b3)

(defun yankee/current-commit-ref ()
  "The current commit's SHA, if under version control.
Currently only supports Git."
  (if (equal 'Git (vc-backend (buffer-file-name)))
      (substring (shell-command-to-string "git rev-parse HEAD") 0 8)
    nil))
#+ END_SRC
[[https://github.com/jkrmr/yankee/blob/517300b3/yankee.el#L158-L163] [yankee.el#L158-L163 (517300b3)]]
#+END_SRC

which produces

#+BEGIN_SRC emacs-lisp
;; yankee.el L158-L163 (517300b3)

(defun yankee/current-commit-ref ()
  "The current commit's SHA, if under version control.
Currently only supports Git."
  (if (equal 'Git (vc-backend (buffer-file-name)))
      (substring (shell-command-to-string "git rev-parse HEAD") 0 8)
    nil))
#+END_SRC
[[https://github.com/jkrmr/yankee/blob/517300b3/yankee.el#L158-L163][yankee.el#L158-L163 (517300b3)]]
